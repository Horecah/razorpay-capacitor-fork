{"version":3,"file":"plugin.js","sources":["esm/web.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { WebPlugin } from '@capacitor/core';\nexport class CheckoutWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Checkout',\n            platforms: ['web'],\n        });\n    }\n    echo(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('ECHO', options);\n            return options;\n        });\n    }\n    open(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log(options);\n            return new Promise((resolve, reject) => {\n                var _a;\n                var razorpay;\n                //add handlers to options to get the success response\n                var finalOps = options;\n                finalOps['handler'] = function (res) {\n                    console.log(res.razorpay_payment_id);\n                    resolve({\n                        response: res\n                    });\n                };\n                finalOps['modal.ondismiss'] = function () {\n                    reject(JSON.stringify({ code: 2, description: 'Payment Canceled by User' }));\n                };\n                var retryCount = 0;\n                if (finalOps.hasOwnProperty('retry')) {\n                    if (finalOps.retry.enabled === true) {\n                        retryCount = finalOps.retry.max_count;\n                    }\n                }\n                //get the first script tag in the document\n                var rjs = document.getElementsByTagName('script')[0];\n                //create a HTMLScriptElement object for rzp script injection\n                var rzpjs = document.createElement('script');\n                rzpjs.id = 'rzp-jssdk';\n                rzpjs.setAttribute('src', 'https://checkout.razorpay.com/v1/checkout.js');\n                (_a = rjs.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(rzpjs);\n                rzpjs.addEventListener('load', () => {\n                    try {\n                        razorpay = new window.Razorpay(finalOps);\n                        razorpay.open();\n                        razorpay.on(('payment.failed'), (res) => {\n                            var _a;\n                            retryCount = retryCount - 1;\n                            if (retryCount < 0) {\n                                console.log(res);\n                                (_a = rjs.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(rzpjs);\n                                reject(res.error);\n                            }\n                        });\n                    }\n                    catch (err) {\n                        reject({\n                            response: err\n                        });\n                    }\n                });\n            });\n            // var rjs = document.getElementsByTagName('script')[0]\n            // var razorpay;\n            // var js:HTMLScriptElement = document.createElement('script')\n            // js.id = 'rzp-jssdk'\n            // js.setAttribute('src','https://checkout.razorpay.com/v1/checkout.js')\n            // document.body.appendChild(js);\n            // document.body.appendChild(js);\n            // rjs.parentNode?.appendChild(js)\n            // rjs.addEventListener('load',()=>{\n            //   try{\n            //     razorpay = new (window as any).Razorpay(options)\n            //     razorpay.open()\n            //     razorpay.on('payment.failed',function(response:any){\n            //         console.log('payment failed')\n            //         console.log(response)\n            //     })\n            //   }catch(err){\n            //     document.body.removeChild(js)\n            //     return{\n            //       response: \"Problem opening checkouts\"\n            //     }\n            //   }\n            // })\n            // return {\n            //   response:options.key\n            // }\n        });\n    }\n}\nconst Checkout = new CheckoutWeb();\nexport { Checkout };\nimport { registerWebPlugin } from '@capacitor/core';\nregisterWebPlugin(Checkout);\n//# sourceMappingURL=web.js.map"],"names":["this","WebPlugin","registerWebPlugin"],"mappings":"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"}