{"version":3,"file":"plugin.cjs.js","sources":["esm/web.js"],"sourcesContent":["import { registerPlugin, WebPlugin } from '@capacitor/core';\nexport class CheckoutWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Checkout',\n            platforms: ['web'],\n        });\n    }\n    async echo(options) {\n        console.log('ECHO', options);\n        return options;\n    }\n    async open(options) {\n        console.log(options);\n        return new Promise((resolve, reject) => {\n            var _a;\n            var razorpay;\n            //add handlers to options to get the success response\n            var finalOps = options;\n            finalOps['handler'] = function (res) {\n                console.log(res.razorpay_payment_id);\n                resolve({\n                    response: res,\n                });\n            };\n            finalOps['modal.ondismiss'] = function () {\n                reject(JSON.stringify({ code: 2, description: 'Payment Canceled by User' }));\n            };\n            var retryCount = 0;\n            if (finalOps.hasOwnProperty('retry')) {\n                if (finalOps.retry.enabled === true) {\n                    retryCount = finalOps.retry.max_count;\n                }\n            }\n            //get the first script tag in the document\n            var rjs = document.getElementsByTagName('script')[0];\n            //create a HTMLScriptElement object for rzp script injection\n            var rzpjs = document.createElement('script');\n            rzpjs.id = 'rzp-jssdk';\n            rzpjs.setAttribute('src', 'https://checkout.razorpay.com/v1/checkout.js');\n            (_a = rjs.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(rzpjs);\n            rzpjs.addEventListener('load', () => {\n                try {\n                    razorpay = new window.Razorpay(finalOps);\n                    razorpay.open();\n                    razorpay.on('payment.failed', (res) => {\n                        var _a;\n                        retryCount = retryCount - 1;\n                        if (retryCount < 0) {\n                            console.log(res);\n                            (_a = rjs.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(rzpjs);\n                            reject(res.error);\n                        }\n                    });\n                }\n                catch (err) {\n                    reject({\n                        response: err,\n                    });\n                }\n            });\n        });\n    }\n}\nconst Checkout = registerPlugin('Checkout', {\n    web: () => import('./web').then(m => new m.CheckoutWeb())\n});\nexport * from './definitions';\nexport { Checkout };\n//# sourceMappingURL=web.js.map"],"names":["WebPlugin","registerPlugin"],"mappings":";;;;;;AACO,MAAM,WAAW,SAASA,cAAS,CAAC;AAC3C,IAAI,WAAW,GAAG;AAClB,QAAQ,KAAK,CAAC;AACd,YAAY,IAAI,EAAE,UAAU;AAC5B,YAAY,SAAS,EAAE,CAAC,KAAK,CAAC;AAC9B,SAAS,CAAC,CAAC;AACX,KAAK;AACL,IAAI,MAAM,IAAI,CAAC,OAAO,EAAE;AACxB,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AACrC,QAAQ,OAAO,OAAO,CAAC;AACvB,KAAK;AACL,IAAI,MAAM,IAAI,CAAC,OAAO,EAAE;AACxB,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC7B,QAAQ,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;AAChD,YAAY,IAAI,EAAE,CAAC;AACnB,YAAY,IAAI,QAAQ,CAAC;AACzB;AACA,YAAY,IAAI,QAAQ,GAAG,OAAO,CAAC;AACnC,YAAY,QAAQ,CAAC,SAAS,CAAC,GAAG,UAAU,GAAG,EAAE;AACjD,gBAAgB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;AACrD,gBAAgB,OAAO,CAAC;AACxB,oBAAoB,QAAQ,EAAE,GAAG;AACjC,iBAAiB,CAAC,CAAC;AACnB,aAAa,CAAC;AACd,YAAY,QAAQ,CAAC,iBAAiB,CAAC,GAAG,YAAY;AACtD,gBAAgB,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,WAAW,EAAE,0BAA0B,EAAE,CAAC,CAAC,CAAC;AAC7F,aAAa,CAAC;AACd,YAAY,IAAI,UAAU,GAAG,CAAC,CAAC;AAC/B,YAAY,IAAI,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;AAClD,gBAAgB,IAAI,QAAQ,CAAC,KAAK,CAAC,OAAO,KAAK,IAAI,EAAE;AACrD,oBAAoB,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC;AAC1D,iBAAiB;AACjB,aAAa;AACb;AACA,YAAY,IAAI,GAAG,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE;AACA,YAAY,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACzD,YAAY,KAAK,CAAC,EAAE,GAAG,WAAW,CAAC;AACnC,YAAY,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,8CAA8C,CAAC,CAAC;AACtF,YAAY,CAAC,EAAE,GAAG,GAAG,CAAC,UAAU,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC7F,YAAY,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM;AACjD,gBAAgB,IAAI;AACpB,oBAAoB,QAAQ,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC7D,oBAAoB,QAAQ,CAAC,IAAI,EAAE,CAAC;AACpC,oBAAoB,QAAQ,CAAC,EAAE,CAAC,gBAAgB,EAAE,CAAC,GAAG,KAAK;AAC3D,wBAAwB,IAAI,EAAE,CAAC;AAC/B,wBAAwB,UAAU,GAAG,UAAU,GAAG,CAAC,CAAC;AACpD,wBAAwB,IAAI,UAAU,GAAG,CAAC,EAAE;AAC5C,4BAA4B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC7C,4BAA4B,CAAC,EAAE,GAAG,GAAG,CAAC,UAAU,MAAM,IAAI,IAAI,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC7G,4BAA4B,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC9C,yBAAyB;AACzB,qBAAqB,CAAC,CAAC;AACvB,iBAAiB;AACjB,gBAAgB,OAAO,GAAG,EAAE;AAC5B,oBAAoB,MAAM,CAAC;AAC3B,wBAAwB,QAAQ,EAAE,GAAG;AACrC,qBAAqB,CAAC,CAAC;AACvB,iBAAiB;AACjB,aAAa,CAAC,CAAC;AACf,SAAS,CAAC,CAAC;AACX,KAAK;AACL,CAAC;AACI,MAAC,QAAQ,GAAGC,mBAAc,CAAC,UAAU,EAAE;AAC5C,IAAI,GAAG,EAAE,MAAM,mDAAe,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;AAC7D,CAAC;;;;;;;;;;;"}